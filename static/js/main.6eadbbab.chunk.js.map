{"version":3,"sources":["World.tsx","App.tsx","index.tsx"],"names":["ctx","mousePosition","x","y","prevPen","vx","vy","pen","window","innerWidth","innerHeight","penDown","lastT","ev_mousemove","ev","offsetX","offsetY","ev_mousedown","ev_mouseup","requestAnimationFrame","tick","t","dt","springForceY","springForceX","accelerationY","accelerationX","updatePen","v","Math","sqrt","lineWidth","max","beginPath","moveTo","bezierCurveTo","stroke","renderPen","World","canvasRef","React","useRef","useEffect","canvas","current","addEventListener","getContext","lineCap","save","fillStyle","fillRect","restore","strokeStyle","ref","width","height","App","className","ReactDOM","render","document","getElementById"],"mappings":"uLAWIA,E,gCALEC,G,UAAgB,CAAEC,EAAG,EAAGC,EAAG,IAC3BC,EAAe,CAAEF,EAAG,EAAGC,EAAG,EAAGE,GAAI,EAAGC,GAAI,GACxCC,EAAW,CAAEL,EAAGM,OAAOC,WAAa,EAAGN,EAAGK,OAAOE,YAAc,EAAGL,GAAI,EAAGC,GAAI,GAC/EK,GAAU,EA2DVC,EAAQ,EAYNC,EAAe,SAACC,GAClBb,EAAcC,EAAIY,EAAGC,QACrBd,EAAcE,EAAIW,EAAGE,SAGnBC,EAAe,SAACH,GAClBH,GAAU,EACVJ,EAAIL,EAAID,EAAcC,EAAIY,EAAGC,QAC7BR,EAAIJ,EAAIF,EAAcE,EAAIW,EAAGE,QAC7BT,EAAIF,GAAKE,EAAID,GAAK,GAGhBY,EAAa,SAACJ,GAChBH,GAAU,GAIdQ,uBA5Ba,SAAPC,EAAQC,GAENT,EAAQ,KA7CE,SAACU,GAEf,IAAIC,GANE,GAMmBhB,EAAIJ,EAAIF,EAAcE,GAC3CqB,GAPE,GAOmBjB,EAAIL,EAAID,EAAcC,GAQ3CuB,GAHSF,EAXD,EAQkBhB,EAAID,IAPzB,GAcLoB,GAHSF,EAZD,EASkBjB,EAAIF,IARzB,GAgBTD,EAAQF,EAAIK,EAAIL,EAChBE,EAAQD,EAAII,EAAIJ,EAChBC,EAAQC,GAAKE,EAAIF,GACjBD,EAAQE,GAAKC,EAAID,GAEjBC,EAAID,IAAMmB,EAAgBH,EAC1Bf,EAAIF,IAAMqB,EAAgBJ,EAC1Bf,EAAIJ,GAAKI,EAAID,GAAKgB,EAClBf,EAAIL,GAAKK,EAAIF,GAAKiB,EAyBdK,EADWN,EAAIT,GACA,IAtBL,WACd,GAAIZ,GAAOW,EAAS,CAChB,IACMiB,EAAIC,KAAKC,KAAKvB,EAAIF,GAAGE,EAAIF,GAAGE,EAAID,GAAGC,EAAID,IAG7CN,EAAI+B,UAAYF,KAAKG,IAAI,GAAI,GAAKJ,GAAG,GACrC5B,EAAIiC,YACJjC,EAAIkC,OAAO9B,EAAQF,EAAGE,EAAQD,GAC9BH,EAAImC,cACA/B,EAAQF,EARF,GAQME,EAAQC,GAAQD,EAAQD,EAR9B,GAQkCC,EAAQE,GAChDC,EAAIL,EATE,GASEK,EAAIF,GAAQE,EAAIJ,EATlB,GASsBI,EAAID,GAC/BC,EAAIL,EAAGK,EAAIJ,GAChBH,EAAIoC,UAUJC,IAEJzB,EAAQS,EACRF,sBAAsBC,MAsB1B,IA4BekB,EA5BS,WACpB,IAAMC,EAAYC,IAAMC,OAA0B,MAmBlD,OAhBAD,IAAME,WAAU,WACZ,IAAMC,EAASJ,EAAUK,QACrBD,IACAA,EAAOE,iBAAiB,YAAahC,GAAc,GACnD8B,EAAOE,iBAAiB,YAAa5B,GAAc,GACnD0B,EAAOE,iBAAiB,UAAW3B,GAAY,IAC/ClB,EAAM2C,EAAOG,WAAW,OAChCC,QAAU,QAhGN/C,IACAA,EAAIgD,OACJhD,EAAIiD,UAAY,OAChBjD,EAAIkD,SAAS,EAAG,EAAG1C,OAAOC,WAAYD,OAAOE,aAC7CV,EAAImD,WA+FAnD,EAAIoD,YAAc,MAClBpD,EAAI+B,UAAY,EAChB/B,EAAIiD,UAAY,WAErB,CAACV,IAGA,4BACIc,IAAKd,EACLe,MAAO9C,OAAOC,WACd8C,OAAQ/C,OAAOE,eC/GZ8C,EARO,WACpB,OACE,yBAAKC,UAAU,OACb,kBAAC,EAAD,QCFNC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.6eadbbab.chunk.js","sourcesContent":["import React from 'react';\n\ntype Pen = {\n    x: number; y: number; vx: number; vy: number;\n}\n\nconst mousePosition = { x: 0, y: 0 };\nconst prevPen: Pen = { x: 0, y: 0, vx: 0, vy: 0 };\nconst pen: Pen = { x: window.innerWidth / 2, y: window.innerHeight / 2, vx: 0, vy: 0 }\nlet penDown = false;\n\nlet ctx: CanvasRenderingContext2D;\n\nconst clear = () => {\n    if (ctx) {\n        ctx.save();\n        ctx.fillStyle = \"#333\";\n        ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);\n        ctx.restore();\n    }\n};\n\nconst k = 3;\nconst damping = 8;\nconst mass = 20;\n\nconst updatePen = (dt: number) => {\n\n    var springForceY = -k * (pen.y - mousePosition.y);\n    var springForceX = -k * (pen.x - mousePosition.x);\n\n    var dampingForceY = damping * pen.vy;\n    var dampingForceX = damping * pen.vx;\n\n    var forceY = springForceY - dampingForceY;\n    var forceX = springForceX - dampingForceX;\n\n    var accelerationY = forceY / mass;\n    var accelerationX = forceX / mass;\n\n    prevPen.x = pen.x;\n    prevPen.y = pen.y;\n    prevPen.vx = pen.vx;\n    prevPen.vy = pen.vy;\n\n    pen.vy += accelerationY * dt;\n    pen.vx += accelerationX * dt;\n    pen.y += pen.vy * dt;\n    pen.x += pen.vx * dt;\n};\n\nconst renderPen = () => {\n    if (ctx && penDown) {\n        const Z = 0.4;\n        const v = Math.sqrt(pen.vx*pen.vx+pen.vy*pen.vy);\n        // ctx.clearRect(100,90,300,20);\n        // ctx.fillText(`v=${v}`, 100,100);\n        ctx.lineWidth = Math.max(3, (60 - v)/4);\n        ctx.beginPath();\n        ctx.moveTo(prevPen.x, prevPen.y);\n        ctx.bezierCurveTo(\n            prevPen.x + prevPen.vx * Z, prevPen.y + prevPen.vy * Z,\n            pen.x - pen.vx * Z, pen.y - pen.vy * Z,\n             pen.x, pen.y);\n        ctx.stroke();\n    }\n};\n\nlet lastT = 0;\nconst tick = (t: number) => {\n\n    if (lastT > 0) {\n        const dt = t - lastT;\n        updatePen(dt / 32);\n        renderPen();\n    }\n    lastT = t;\n    requestAnimationFrame(tick);\n};\n\nconst ev_mousemove = (ev: MouseEvent) => {\n    mousePosition.x = ev.offsetX;\n    mousePosition.y = ev.offsetY;\n}\n\nconst ev_mousedown = (ev: MouseEvent) => {\n    penDown = true;\n    pen.x = mousePosition.x = ev.offsetX;\n    pen.y = mousePosition.y = ev.offsetY;\n    pen.vx = pen.vy = 0;\n}\n\nconst ev_mouseup = (ev: MouseEvent) => {\n    penDown = false;\n}\n\n\nrequestAnimationFrame(tick);\n\nconst World: React.FC = () => {\n    const canvasRef = React.useRef<HTMLCanvasElement>(null);\n\n\n    React.useEffect(() => {\n        const canvas = canvasRef.current;\n        if (canvas) {\n            canvas.addEventListener('mousemove', ev_mousemove, false);\n            canvas.addEventListener('mousedown', ev_mousedown, false);\n            canvas.addEventListener('mouseup', ev_mouseup, false);\n            ctx = canvas.getContext('2d')!;\nctx.lineCap = \"round\";\n            clear();\n\n            ctx.strokeStyle = \"red\";\n            ctx.lineWidth = 1;\n            ctx.fillStyle = \"green\";\n        }\n    }, [canvasRef])\n\n    return (\n        <canvas\n            ref={canvasRef}\n            width={window.innerWidth}\n            height={window.innerHeight}\n        />);\n}\n\nexport default World;","import React from 'react';\nimport './App.css';\nimport World from './World'\n\nconst App: React.FC = () => {\n  return (\n    <div className=\"App\">\n      <World />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}